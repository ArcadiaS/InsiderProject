import{a as q,d as z,r as B,b as k,c as G,o as O,e as p,f as W,g as a,w as l,h as c,i as R,u,F as D,j as N,k as V,t as y,l as I,E as X,m as J,n as K,p as Q,q as Y,s as Z,v as $,x as ee,y as ae,z as te,A as le,B as ne}from"./app.8634cd68.js";const oe="http://localhost:8890/api",m=q.create({baseURL:oe,timeout:2e4});m.interceptors.request.use(t=>(t.headers["X-Requested-With"]="XMLHttpRequest",t),t=>Promise.reject(t));m.interceptors.response.use(t=>{const{data:e,status:d}=t;return d===void 0?Promise.reject(new Error("")):e},t=>{const{data:e,status:d}=t.response;switch(d){default:return t?Promise.reject(t):e}});const w={get:(t,e)=>m.get(t,{params:e}),post:(t,e,d)=>m.post(t,e,d),put:(t,e)=>m.put(t,e),delete:(t,e)=>m.delete(t,{params:e}),head:(t,e)=>m.head(t,{params:e}),options:(t,e)=>m.options(t,{params:e}),patch:(t,e)=>m.patch(t,e)},se=z("MainStore",()=>{const t=B({league_id:null,season_id:null,week_number:1}),e=k([]),d=k([]),v=k([]),h=k([]),g=k(1),C=k(null),x=k([]),P=k([]);async function F(){await w.get("/leagues",t).then(n=>{e.value=n,C.value=n[0],g.value=n[0].current_week,v.value=n[0].competition_weeks,n[0].competition_weeks&&(h.value=n[0].competition_weeks.find(r=>r.week_number==g.value)),x.value=n[0].teams}).catch(()=>{console.log("error1")})}async function b(){await w.get("/leagues",t).then(n=>{e.value=n,C.value=n[0],t.league_id=n[0].id,g.value=n[0].current_week,v.value=n[0].competition_weeks,n[0].competition_weeks&&(console.log("competitions exists"),h.value=n[0].competition_weeks.find(r=>r.week_number==g.value)),x.value=n[0].teams,A()}).catch(()=>{console.log("error2")})}async function A(){await w.get("/seasons",t).then(n=>{d.value=n,t.season_id=n[0].id,_()}).catch(()=>{console.log("error3")})}async function _(){await w.get("/standings",t).then(n=>{P.value=n}).catch(()=>{console.log("error4")})}async function f(){await w.post("/prepare-league-schedule",t).then(n=>{_()}).catch(()=>{console.log("error5")})}async function M(n){v.value.find(r=>r.week_number==n)&&(h.value=v.value.find(r=>r.week_number==n))}async function S(){await w.post("/play-all-weeks",t).then(n=>{b()}).catch(()=>{console.log("error6")})}async function E(){await w.post("/play-week-by-week",t).then(n=>{b()}).catch(()=>{console.log("error7")})}async function s(){await w.post("/reset-all-data",t).then(n=>{b()}).catch(()=>{console.log("erro8")})}return{filters:t,leagues:e,seasons:d,standings:P,competition_weeks:v,current_week_number:g,current_week:h,selected_league:C,teams:x,getData:b,getSeasons:A,getStandings:_,prepareSchedule:f,weekMatches:M,playAllWeeks:S,playNextWeek:E,resetAllData:s,submitFilter:F}}),re={class:"card-header"},ue={class:"text-md font-medium"},ce={class:"card-header"},de=G({__name:"Home",setup(t){const e=se(),d=B({league_id:null,season_id:null,week_number:1}),v=()=>{e.playAllWeeks()},h=()=>{e.playNextWeek()},g=()=>{e.resetAllData()},C=_=>{e.league_id=_,e.submitFilter()},x=_=>{e.season_id=_,e.submitFilter()},P=_=>{e.week_number=_,e.submitFilter()},F=()=>{e.weekMatches(e.current_week.week_number-1)},b=()=>{e.weekMatches(e.current_week.week_number+1)},A=()=>{e.submitFilter(d),e.getSeasons()};return O(()=>{e.getData()}),(_,f)=>{const M=X,S=ne,E=J,s=K,n=Q,r=Y,i=Z,L=$,H=ee,T=ae,U=te,j=le;return p(),W("div",null,[a(j,{style:{"text-align":"center"}},{default:l(()=>[a(M,null,{default:l(()=>[c("Header")]),_:1}),a(U,null,{default:l(()=>[a(T,{class:"box-card"},{header:l(()=>[R("div",re,[a(r,null,{default:l(()=>[a(s,{span:4},{default:l(()=>[a(E,{modelValue:u(e).filters.league_id,"onUpdate:modelValue":f[0]||(f[0]=o=>u(e).filters.league_id=o),class:"m-2",placeholder:"Select",size:"large",onChange:C},{default:l(()=>[(p(!0),W(D,null,N(u(e).leagues,o=>(p(),V(S,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{span:4},{default:l(()=>[a(E,{modelValue:u(e).filters.season_id,"onUpdate:modelValue":f[1]||(f[1]=o=>u(e).filters.season_id=o),class:"m-2",placeholder:"Select",size:"large",onChange:x},{default:l(()=>[(p(!0),W(D,null,N(u(e).seasons,o=>(p(),V(S,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{span:4},{default:l(()=>[a(E,{modelValue:u(e).filters.week_number,"onUpdate:modelValue":f[2]||(f[2]=o=>u(e).filters.week_number=o),class:"m-2",placeholder:"Select",size:"large",onChange:P},{default:l(()=>[(p(!0),W(D,null,N(u(e).competition_weeks,o=>(p(),V(S,{key:o.week_number,label:o.week_number,value:o.week_number},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{span:4},{default:l(()=>[a(n,{class:"button",onClick:A,type:"info"},{default:l(()=>[c("Submit")]),_:1})]),_:1})]),_:1})])]),default:l(()=>[a(r,null,{default:l(()=>[a(s,{span:18},{default:l(()=>[u(e).standings?(p(),V(L,{key:0,data:u(e).standings,stripe:"",style:{width:"100%"},"highlight-current-row":""},{default:l(()=>[a(i,{type:"index",width:"40"}),a(i,{prop:"team.name",label:"Team Name",width:"180"}),a(i,{prop:"played",label:"Played"}),a(i,{prop:"won",label:"Won"}),a(i,{prop:"drawn",label:"Drawn"}),a(i,{prop:"lost",label:"Lost"}),a(i,{prop:"goals_for",label:"GF"}),a(i,{prop:"goals_against",label:"GA"}),a(i,{prop:"goal_difference",label:"GD"}),a(i,{prop:"points",label:"Points"}),a(i,{label:"Champ. Chance"},{default:l(o=>[R("span",ue,"%"+y(o.row.championship_chance),1)]),_:1})]),_:1},8,["data"])):I("",!0)]),_:1}),a(s,{span:6},{default:l(()=>[a(T,{class:"box-card"},{header:l(()=>[R("div",ce,[a(r,null,{default:l(()=>[a(s,{span:3},{default:l(()=>[a(n,{onClick:F},{default:l(()=>[c("Prev")]),_:1})]),_:1}),a(s,{span:15},{default:l(()=>[c("Week "+y(u(e).current_week.week_number),1)]),_:1}),a(s,{span:3},{default:l(()=>[a(n,{onClick:b},{default:l(()=>[c("Next")]),_:1})]),_:1})]),_:1})])]),default:l(()=>[(p(!0),W(D,null,N(u(e).current_week.competitions,o=>(p(),V(r,null,{default:l(()=>[a(s,{span:8},{default:l(()=>[c(y(o.home_team.name),1)]),_:2},1024),a(s,{span:2},{default:l(()=>[c(y(o.home_team_goals),1)]),_:2},1024),a(s,{span:2},{default:l(()=>[c(y(o.away_team_goals),1)]),_:2},1024),a(s,{span:8},{default:l(()=>[c(y(o.away_team.name),1)]),_:2},1024)]),_:2},1024))),256)),a(H),a(r,null,{default:l(()=>[a(s,{span:8,onClick:v,type:"primary"},{default:l(()=>[c("Play All Weeks")]),_:1}),a(s,{span:8,onClick:h,type:"primary"},{default:l(()=>[c("Play Next Week")]),_:1}),a(s,{span:8,onClick:g,type:"danger"},{default:l(()=>[c("Reset Data")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{de as default};
